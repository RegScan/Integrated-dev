# Website Scanner 环境变量配置模板
# 复制此文件为 .env 并填入实际值

# 基础配置
APP_NAME=Website Scanner
VERSION=1.0.0
DEBUG=false
ENVIRONMENT=production

# 服务器配置
HOST=0.0.0.0
PORT=8001

# 数据库配置
MONGODB_URL=mongodb://localhost:27017/website_scanner
DATABASE_URL=sqlite:///./data/website_scanner.db

# Redis配置
REDIS_URL=redis://localhost:6379/1
REDIS_MAX_CONNECTIONS=50
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# 缓存配置
CACHE_TTL=3600
CACHE_SCAN_RESULT_TTL=86400
CACHE_BEIAN_INFO_TTL=604800
CACHE_WEBSITE_INFO_TTL=3600
CACHE_ENABLED=true

# 数据库连接池配置
DB_POOL_SIZE=20
DB_MAX_OVERFLOW=30
DB_POOL_RECYCLE=3600
DB_POOL_TIMEOUT=30
DB_POOL_PRE_PING=true

# API配置
BEIAN_API_KEY=your_beian_api_key_here
CONTENT_API_KEY=your_content_api_key_here

# 百度AI内容审核API配置
BAIDU_API_KEY=your_baidu_api_key_here
BAIDU_SECRET_KEY=your_baidu_secret_key_here

# 阿里云内容安全API配置
ALIYUN_ACCESS_KEY=your_aliyun_access_key_here
ALIYUN_SECRET_KEY=your_aliyun_secret_key_here
ALIYUN_REGION=cn-shanghai

# 扫描配置
MAX_CONCURRENT_SCANS=5
MIN_CONCURRENT_SCANS=1
CONCURRENT_SCALE_FACTOR=0.8
SCAN_TIMEOUT=30
MAX_IMAGES_PER_SITE=5
MAX_PAGES_PER_SITE=10

# 爬虫配置
CRAWLER_TIMEOUT=30
CRAWLER_RETRY_TIMES=3
CRAWLER_RETRY_DELAY=5
CRAWLER_USER_AGENT=Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36

# 浏览器配置
BROWSER_HEADLESS=true
BROWSER_TIMEOUT=10000
BROWSER_WAIT_TIMEOUT=5000
BROWSER_VIEWPORT_SIZE={"width": 1920, "height": 1080}

# OOM防护配置
MEMORY_MAX_PERCENT=80.0
MEMORY_CHECK_INTERVAL=5
MEMORY_WAIT_TIMEOUT=30
BROWSER_MAX_MEMORY_MB=512
BROWSER_MAX_IMAGES=3
BROWSER_MAX_TEXT_LENGTH=10000
BROWSER_DISABLE_JS=false
BROWSER_DISABLE_IMAGES=false
BROWSER_DISABLE_CSS=false

# 限流配置
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# 监控配置
METRICS_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# 性能监控配置
PERFORMANCE_MONITORING=true
SLOW_QUERY_THRESHOLD=1.0
API_RESPONSE_TIME_THRESHOLD=0.5
CRAWLER_RESPONSE_TIME_THRESHOLD=10.0

# 异步任务配置
ASYNC_TASK_ENABLED=true
ASYNC_TASK_WORKERS=4

# 日志配置
LOG_LEVEL=INFO
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s
LOG_FILE=logs/website_scanner.log

# CORS配置
ALLOWED_ORIGINS=["*"]
ALLOWED_HOSTS=["*"]
